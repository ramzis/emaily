!function(e){var n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/",o(o.s=7)}([function(e,n){e.exports=require("passport")},function(e,n){e.exports=require("mongoose")},function(e,n,o){e.exports=o(6)},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("cookie-session")},function(e,n){e.exports=require("passport-google-oauth20")},function(e,n,o){"use strict";o.r(n),n.default={googleClientID:process.env.GOOGLE_CLIENT_ID,googleClientSecret:process.env.GOOGLE_CLIENT_SECRET,mongoURI:process.env.MONGO_URI,cookieKey:process.env.COOKIE_KEY}},function(e,n,o){"use strict";o.r(n);var t=o(3),r=o.n(t),u=o(1),i=o.n(u),l=o(4),s=o.n(l),c=o(0),a=o.n(c),f=o(2),g=o.n(f),p=function(e){e.get("/auth/google",a.a.authenticate("google",{scope:["profile","email"]})),e.get("/auth/google/callback",a.a.authenticate("google")),e.get("/api/logout",function(e,n){e.logout(),n.send(e.user)}),e.get("/api/current_user",function(e,n){n.send(e.user)})},d=new u.Schema({googleId:String});i.a.model("users",d);var v=o(5),y=i.a.model("users");a.a.serializeUser(function(e,n){n(null,e.id)}),a.a.deserializeUser(function(e,n){y.findById(e).then(function(e){n(null,e)})});a.a.use(new v.Strategy({clientID:g.a.googleClientID,clientSecret:g.a.googleClientSecret,callbackURL:"/auth/google/callback"},function(e,n,o,t){y.findOne({googleId:o.id}).then(function(e){e?t(null,e):new y({googleId:o.id}).save().then(function(e){return t(null,e)})})}));i.a.connect(g.a.mongoURI,{useNewUrlParser:!0});var O=r()();O.use(s()({maxAge:2592e6,keys:[g.a.cookieKey]})),O.use(a.a.initialize()),O.use(a.a.session()),p(O);var b=process.env.PORT||5e3;O.listen(b)}]);